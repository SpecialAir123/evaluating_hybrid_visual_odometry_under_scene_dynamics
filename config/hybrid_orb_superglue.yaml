# ============================================================================
# Hybrid Visual Odometry Pipeline: ORB + SuperGlue
# ============================================================================
# This pipeline isolates the benefit of a deep matcher (SuperGlue) with a 
# classical detector (ORB) to evaluate the contribution of learned matching.

# ----------------------------------------------------------------------------
# Detector Configuration
# ----------------------------------------------------------------------------
detector: orb
detector_params:
  nfeatures: 2000  # Maximum number of ORB keypoints to detect

# ----------------------------------------------------------------------------
# Matcher Configuration
# ----------------------------------------------------------------------------
matcher: superglue  # Learned matcher (SuperGlue)
matcher_params:
  weights_type: indoor  # "indoor" for TUM (ScanNet-trained) or "outdoor" for KITTI (MegaDepth-trained)
  sinkhorn_iterations: 20  # Number of Sinkhorn iterations for optimal transport
  match_threshold: 0.2  # Matching confidence threshold (higher = fewer but better matches, 0.2 is standard)
  use_cuda: true  # Use GPU if available

# ----------------------------------------------------------------------------
# Masking Configuration
# ----------------------------------------------------------------------------
masking: none  # No masking for this pipeline

# ----------------------------------------------------------------------------
# Dataset Configuration (can be overridden via CLI: --dataset, --sequence)
# ----------------------------------------------------------------------------
dataset: TUM
sequence: rgbd_dataset_freiburg1_desk
data_root: data/TUM

# ----------------------------------------------------------------------------
# Pose Estimation Parameters
# ----------------------------------------------------------------------------
pose_estimation:
  ransac_threshold: 1.0  # RANSAC threshold in pixels (typical: 1.0-3.0)
  ransac_confidence: 0.999  # RANSAC confidence level (must be > 0 and < 1)
  min_matches: 8           # Minimum number of matches required for pose estimation

# ----------------------------------------------------------------------------
# Evaluation Parameters
# ----------------------------------------------------------------------------
evaluation:
  max_time_diff: 0.02  # Maximum time difference (seconds) for timestamp matching
  rpe_delta: 1         # Frame interval for relative pose error computation

# ----------------------------------------------------------------------------
# Output Configuration
# ----------------------------------------------------------------------------
output:
  trajectory_file: output/trajectory.txt
  trajectory_plot: output/trajectory.png
  errors_plot: output/errors.png
  metrics_file: output/metrics.json
  plot_dpi: 150

