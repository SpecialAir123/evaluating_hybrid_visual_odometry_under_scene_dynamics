# ============================================================================
# Hybrid Visual Odometry Pipeline: ORB + LightGlue
# ============================================================================
# This pipeline isolates the benefit of a lighter deep matcher (LightGlue) with a 
# classical detector (ORB) to evaluate the contribution of learned matching.
# LightGlue is more efficient than SuperGlue while maintaining competitive accuracy.

# ----------------------------------------------------------------------------
# Detector Configuration
# ----------------------------------------------------------------------------
detector: orb
detector_params:
  nfeatures: 2000  # Maximum number of ORB keypoints to detect

# ----------------------------------------------------------------------------
# Matcher Configuration
# ----------------------------------------------------------------------------
matcher: lightglue  # Learned matcher (LightGlue - lighter than SuperGlue)
matcher_params:
  features: superpoint  # Feature type for LightGlue (use 'superpoint' for 256-dim descriptors to match ORB)
  depth_confidence: -1  # Depth confidence threshold (-1 = auto)
  width_confidence: -1  # Width confidence threshold (-1 = auto)
  filter_threshold: 0.1  # Matching confidence threshold (lower = more matches)
  use_cuda: true  # Use GPU if available

# ----------------------------------------------------------------------------
# Masking Configuration
# ----------------------------------------------------------------------------
masking: none  # No masking for this pipeline

# ----------------------------------------------------------------------------
# Dataset Configuration (can be overridden via CLI: --dataset, --sequence)
# ----------------------------------------------------------------------------
dataset: TUM
sequence: rgbd_dataset_freiburg1_desk
data_root: data/TUM

# ----------------------------------------------------------------------------
# Pose Estimation Parameters
# ----------------------------------------------------------------------------
pose_estimation:
  ransac_threshold: 1.0  # RANSAC threshold in pixels (typical: 1.0-3.0)
  ransac_confidence: 0.999  # RANSAC confidence level (must be > 0 and < 1)
  min_matches: 8           # Minimum number of matches required for pose estimation

# ----------------------------------------------------------------------------
# Evaluation Parameters
# ----------------------------------------------------------------------------
evaluation:
  max_time_diff: 0.02  # Maximum time difference (seconds) for timestamp matching
  rpe_delta: 1         # Frame interval for relative pose error computation

# ----------------------------------------------------------------------------
# Output Configuration
# ----------------------------------------------------------------------------
output:
  trajectory_file: output/trajectory.txt
  trajectory_plot: output/trajectory.png
  errors_plot: output/errors.png
  metrics_file: output/metrics.json
  plot_dpi: 150

