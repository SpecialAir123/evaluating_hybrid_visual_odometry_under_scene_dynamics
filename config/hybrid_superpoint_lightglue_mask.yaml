# Hybrid Pipeline with Masking: SuperPoint + LightGlue + Optical Flow Masking
# This configuration adds dynamic object masking for improved robustness

# Detector configuration
detector: superpoint
detector_params:
  device: cuda
  max_keypoints: 2048
  keypoint_threshold: 0.005
  nms_radius: 4

# Matcher configuration
matcher: lightglue
matcher_params:
  features: superpoint
  device: cuda
  filter_threshold: 0.1

# Use LightGlue adapter (recommended)
use_lightglue_adapter: true

# Masking configuration - Optical Flow based
masking: opticalflow
masking_params:
  flow_method: farneback  # 'farneback' or 'dis'
  threshold: 2.0  # Flow deviation threshold (pixels)
  min_flow_magnitude: 1.0

# Alternative: Use advanced optical flow with homography
# masking: opticalflow_advanced
# masking_params:
#   flow_method: farneback
#   threshold: 3.0
#   use_homography: true

# Alternative: Use semantic segmentation
# masking: semantic
# masking_params:
#   model: deeplabv3  # 'deeplabv3', 'fcn', or 'maskrcnn'
#   dataset: coco  # 'coco' or 'cityscapes'
#   device: cuda
#   erosion_kernel: 5

# Alternative: Use hybrid masking (optical flow + semantic)
# masking: hybrid
# masking_params:
#   flow_threshold: 2.0
#   semantic_model: deeplabv3
#   dataset: coco
#   device: cuda

# Dataset (can be overridden via CLI)
dataset: TUM
sequence: rgbd_dataset_freiburg3_walking_xyz
data_root: data/TUM

# Pose estimation parameters
pose_estimation:
  ransac_threshold: 0.999
  ransac_confidence: 1.0
  min_matches: 8

# Evaluation parameters
evaluation:
  max_time_diff: 0.02
  rpe_delta: 1

# Output configuration
output:
  trajectory_file: trajectory_hybrid_mask.txt
  trajectory_plot: trajectory_hybrid_mask.png
  errors_plot: errors_hybrid_mask.png
  plot_dpi: 150
